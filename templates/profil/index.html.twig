{% extends 'base.html.twig' %}

{% block title %}Mon profil{% endblock %}

{% block body %}
<h1>Mon compte</h1>
<ul class="nav nav-tabs" id="myTab" role="tablist">
  <li class="nav-item" role="presentation">
    <button class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#home-tab-pane" type="button" role="tab" aria-controls="home-tab-pane" aria-selected="true">Mes infos</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="profile-tab" data-bs-toggle="tab" data-bs-target="#profile-tab-pane" type="button" role="tab" aria-controls="profile-tab-pane" aria-selected="false">Mes favoris</button>
  </li>
</ul>
<div class="tab-content" id="myTabContent">
  <div class="tab-pane fade show active" id="home-tab-pane" role="tabpanel" aria-labelledby="home-tab" tabindex="0">
    <div class="col-12">
    {# On affiche le formulaire #}
      {{ form_start(form) }}
      {{ form_widget(form) }}
      <button type="submit" class="btn btn-primary">Modifier</button>
      {{ form_end(form) }}
    </div>
  </div>
  <div class="tab-pane fade" id="profile-tab-pane" role="tabpanel" aria-labelledby="profile-tab" tabindex="0">
    <div class="row">
      {% if app.user.musics|length > 0 %}
        {% for music in app.user.musics %}
          <div class="col-12 col-md-3 col-xl-3">
            <div class="card mt-3">
              <a href="{{ path('app_music_show', { slug: music.slug }) }}">
                  <img src="{{ asset('images/musics/' ~ music.imageName) }}" class="card-img-top" alt="{{ music.title }}">
              </a>
              <div class="card-body">
                <a href="{{ path('app_music_show', { slug: music.slug }) }}" class="text-dark">{{ music.title }}</a>
                {# <p class="card-text">{{ music.artist }}</p> #}
                <div class="mt-3 d-flex flex-row justify-content-around align-items-center align-self-center">
                  <a href="{{ path('app_music_show', { slug: music.slug }) }}" class="btn btn-dark">Ecouter</a>
                  <a href="{{ path('remove_music', { id: music.id }) }}" class="btn btn-danger">
                    <i class="fa-solid fa-heart"></i>
                  </a>
                </div>
              </div>
            </div>
          </div>
        {% endfor %}
      {% else %}
        <p>Vous n'avez pas encore de favoris</p>
      {% endif %}
    </div>

{#   
  {% if app.user is not null and app.user.musics is not null and app.user.musics|length > 0 %}
  <ul>
    {% for music in app.user.musics %}
      <li>{{ music.title}} <a href="{{ path('remove_music', { id : music.id}) }}">Supprimer</a></li>
    {% endfor %}
  </ul>
{% else %}
  <p>Vous n'avez aucun favoris pour l'instant</p>
{% endif %} #}

</div>
</div>

{% endblock %}
