{% extends 'base.html.twig' %}

{% block title %}Mon profil
{% endblock %}

{% block body %}
	<h1>Mon compte</h1>
	{# start-menu tabs #}
	<ul class="nav nav-tabs" id="myTab" role="tablist">
		{# start-profil tab #}
		<li class="nav-item" role="presentation">
			<button class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#home-tab-pane" type="button" role="tab" aria-controls="home-tab-pane" aria-selected="true">Mes infos</button>
		</li>
		{# end-profil tab #}
		{# start-favoris tab #}
		<li class="nav-item" role="presentation">
			<button class="nav-link" id="profile-tab" data-bs-toggle="tab" data-bs-target="#profile-tab-pane" type="button" role="tab" aria-controls="profile-tab-pane" aria-selected="false">Mes favoris</button>
		</li>
		{# end-favoris tab #}
		{# start-artist music tab #}
		{% if is_granted('ROLE_ARTISTE') %}
		<li class="nav-item" role="music">
			<button class="nav-link" id="music-tab" data-bs-toggle="tab" data-bs-target="#music-tab-pane" type="button" role="tab" aria-controls="music-tab-pane" aria-selected="false">Mes musiques</button>
		</li>
		{% endif %}
		{# end-artist music tab #}
	</ul>
	{# end-menu tabs #}
	{# start-tab contents #}
	<div class="tab-content" id="myTabContent">
		{# start-profil content #}
		<div class="tab-pane fade show active" id="home-tab-pane" role="tabpanel" aria-labelledby="home-tab" tabindex="0">
			<div
				class="col-12">
				{# On affiche le formulaire #}
				{{ form_start(form) }}
				{{ form_widget(form) }}
				<button type="submit" class="btn btn-primary">Modifier</button>
				{{ form_end(form) }}
			</div>
		</div>
		{# end-profil content #}
		{# start-favoris content #}
		<div class="tab-pane fade" id="profile-tab-pane" role="tabpanel" aria-labelledby="profile-tab" tabindex="0">
			<div class="row">
				{% if app.user.musics|length > 0 %}
					{% for music in app.user.musics %}
						<div class="col-12 col-md-3 col-xl-3">
							<div class="card mt-3">
								<a href="{{ path('app_music_show', { slug: music.slug }) }}">
									<img src="{{ asset('images/musics/' ~ music.imageName) }}" class="card-img-top" alt="{{ music.title }}">
								</a>
								<div class="card-body">
									<a href="{{ path('app_music_show', { slug: music.slug }) }}" class="text-dark">{{ music.title }}</a>
									{# <p class="card-text">{{ music.artist }}</p> #}
									<div class="mt-3 d-flex flex-row justify-content-around align-items-center align-self-center">
										<a href="{{ path('app_music_show', { slug: music.slug }) }}" class="btn btn-dark">Ecouter</a>
										<a href="{{ path('remove_music', { id: music.id }) }}" class="btn btn-danger">
											<i class="fa-solid fa-heart"></i>
										</a>
									</div>
								</div>
							</div>
						</div>
					{% endfor %}
				{% else %}
					<p>Vous n'avez pas encore de favoris</p>
				{% endif %}
			</div>
		</div>
		{# end-favoris content #}
		{# start-artist music content #}
		{% if is_granted('ROLE_ARTISTE') %}
		<div class="tab-pane fade" id="music-tab-pane" role="tabpanel" aria-labelledby="music-tab" tabindex="0">
			<div class="col-12">
				<div class="d-flex flex-wrap justify-content-between align-items-center">
					<h1>Vos musiques</h1>
					<a href="{{ path('app_artist_music_new') }}"class="btn btn-secondary"><i class="align-middle" data-feather="plus-circle"></i></a>
				</div>

				{# start-artist music tableau #}
				<div class="table-responsive-lg table-responsive-md table-responsive-sm table-responsive">
					<table class="table">
						<thead>
							<tr>
								<th>Id</th>
								<th>Title</th>
								<th>Description</th>
								<th>Author</th>
								<th>ImageName</th>
								<th>Slug</th>
								<th>UpdatedAt</th>
								<th>Length</th>
								<th>AudioName</th>
								<th class="text-end">actions</th>
							</tr>
						</thead>
						<tbody>
							{% for onemusic in music %}
								<tr>
									<td>{{ onemusic.title }}</td>
									<td>{{ onemusic.id }}</td>
									<td>{{ onemusic.description }}</td>
									<td>{{ onemusic.author }}</td>
									<td>{{ onemusic.imageName }}</td>
									<td>{{ onemusic.slug }}</td>
									<td>{{ onemusic.updatedAt ? onemusic.updatedAt|date('Y-m-d H:i:s') : '' }}</td>
									<td>{{ onemusic.length ? onemusic.length|date('H:i:s') : '' }}</td>
									<td>{{ onemusic.audioName }}</td>
									<td class="text-end">
										<a href="{{ path('app_artist_music_show', {'id': onemusic.id}) }}" class="btn btn-warning"><i class="align-middle" data-feather="eye"></i></a>
										<a href="{{ path('app_artist_music_edit', {'id': onemusic.id}) }}" class="btn btn-success"><i class="align-middle" data-feather="edit-2"></i></a>
									</td>
								</tr>
							{% else %}
								<tr>
									<td colspan="10">no records found</td>
								</tr>
							{% endfor %}
						</tbody>
					</table>
					{# end-artist music tableau #}
				</div>
			</div>
		</div>
		{% endif %}
		{# end-artist music content #}
	</div>
	{# end-content tabs #}

{% endblock %}